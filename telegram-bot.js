const TelegramBot = require('node-telegram-bot-api');

// ะขะพะบะตะฝ ะฑะพัะฐ
const token = '8126548981:AAGC86ZaJ0SYLICC0WbpS7aGOhU9t8iz_a4';

// ะกะพะทะดะฐะตะผ ะฑะพัะฐ
const bot = new TelegramBot(token, { polling: true });

// ะะฑัะฐะฑะพััะธะบ ะบะพะผะฐะฝะดั /start
bot.onText(/\/start/, (msg) => {
    const chatId = msg.chat.id;

    // ะัะธะฒะตัััะฒะตะฝะฝะพะต ัะพะพะฑัะตะฝะธะต
    const welcomeMessage = `๐ ะัะธะฒะตั! ะฏ ะฟะพะผะพะณั ะฒะฐะผ ะพัะบัััั ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธะต Prizmatic.

๐ฑ ะะฐะบ ะพัะบัััั ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธะต:

1๏ธโฃ ะะฐะนะดะธัะต ะฒ ะฟัะพัะธะปั ะฑะพัะฐ
2๏ธโฃ ะะฐะถะผะธัะต ะบะฝะพะฟะบั "ะัะบัััั ะฟัะธะปะพะถะตะฝะธะต"

ะะปะธ ะฒ ัะฐัะต:
1๏ธโฃ ะะฐะถะผะธัะต ะบะฝะพะฟะบั "ะัะบัััั" ะฒ ะผะตะฝั ะฑะพัะฐ

๐ฅ ะะพัะผะพััะธัะต ะฒะธะดะตะพ-ะธะฝััััะบัะธั ะฝะธะถะต:`;

    // ะัะฟัะฐะฒะปัะตะผ ะฟัะธะฒะตัััะฒะตะฝะฝะพะต ัะพะพะฑัะตะฝะธะต
    bot.sendMessage(chatId, welcomeMessage)
        .then(() => {
            // ะัะฟัะฐะฒะปัะตะผ ะฒะธะดะตะพ
            return bot.sendVideo(chatId, 'IMG_7164.MP4', {
                caption: '๐น ะะธะดะตะพ-ะธะฝััััะบัะธั ะฟะพ ะพัะบัััะธั ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธั'
            });
        })
        .catch((error) => {
            console.error('ะัะธะฑะบะฐ ะฟัะธ ะพัะฟัะฐะฒะบะต ัะพะพะฑัะตะฝะธั:', error);
            bot.sendMessage(chatId, 'โ ะัะพะธะทะพัะปะฐ ะพัะธะฑะบะฐ. ะะพะฟัะพะฑัะนัะต ะฟะพะทะถะต.');
        });
});

// ะะฑัะฐะฑะพััะธะบ ะฒัะตั ัะตะบััะพะฒัั ัะพะพะฑัะตะฝะธะน
bot.on('message', (msg) => {
    const chatId = msg.chat.id;

    // ะัะปะธ ััะพ ะฝะต ะบะพะผะฐะฝะดะฐ /start, ะพัะฟัะฐะฒะปัะตะผ ะฟะพะดัะบะฐะทะบั
    if (msg.text && !msg.text.startsWith('/')) {
        bot.sendMessage(chatId, '๐ฑ ะะปั ะฟะพะปััะตะฝะธั ะธะฝััััะบัะธะธ ะฟะพ ะพัะบัััะธั ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธั ะพัะฟัะฐะฒััะต ะบะพะผะฐะฝะดั /start');
    }
});

console.log('๐ค ะะพั ะทะฐะฟััะตะฝ! ะะถะธะดะฐะตะผ ัะพะพะฑัะตะฝะธั...');

// Graceful shutdown
process.on('SIGINT', () => {
    console.log('๐ ะะพั ะพััะฐะฝะพะฒะปะตะฝ');
    process.exit();
});